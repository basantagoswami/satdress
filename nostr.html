<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Make your lightning address your nostr identifier</title>
    <meta charset="utf-8" />
    <link rel="icon" type="image/png" href="https://i.imgur.com/4yaPtA2.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      rel="stylesheet"
      type="text/css"
      href="//fonts.googleapis.com/css?family=PT+Sans"
    />
    <link rel="stylesheet" href="/static/style.css" />
  </head>
  <body>
    <main id="main">
      <div class="title">Success!</div>
      <div class="card">
        <div class="description">
          <b>{{ name }}@{{ actual_domain }}</b> is your new Nostr Address!
        </div>
        <div class="bold-small">
          In order to edit the configuration of this address in the future you
          must save this secret pin:
        </div>
        <div class="code">{{ pin }}</div>
        <button class="copy-button" @click="copyToClipboard">
          {{ copied ? 'Copied!' : 'Copy Secret PIN' }}
        </button>
        <div class="bold-small">
          You can now update your nostr address (NIP-05 identifier) using your
          nostr client.
        </div>
      </div>
    </main>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/3.2.2/vue.global.prod.min.js"></script>
    <script>
      const initial = {} // REPLACED WITH SERVER DATA //

      const Main = {
        data() {
          return {
            ...initial
          }
        },

        methods: {
          copyToClipboard() {
            navigator.clipboard.writeText(this.pin)
            this.copied = true
            setTimeout(() => {
              this.copied = false
            }, 5000)
          }
        },

        mounted() {
          // I don't think I need to do something here
        }
      }

      Vue.createApp(Main).mount('#main')
    </script>
  </body>
</html>
